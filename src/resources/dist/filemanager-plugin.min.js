(function($){$.fn.filemanager=function(options){return new Plugin(this,$.extend({path:false,driver:false,loadOnStartUp:true,components:{header:true,sidebar:true}},options))}})(jQuery);
class Plugin{constructor(element,settings){this.settings=settings;this.element=element;this.initialize();this.callback=false}initialize(){let url=`/filemanager/modal?load-on-startup=${this.settings.loadOnStartUp}`;if(!this.settings.components.header)url+=`&header=false`;if(!this.settings.components.sidebar)url+=`&sidebar=false`;if(this.settings.path)url+=`&startContent=${this.settings.path}`;if(this.settings.driver)url+=`&startDriver=${this.settings.driver}`;this.element.load(url)}done(callback){$(document).on("laravel-filemanager:loaded",
()=>{callback()});return this}pick(callback){$(document).on("laravel-filemanager:select",(e,file)=>{callback(file,e)});return this}load(path,driver){this.retry(()=>{filemanager.load(path,driver)});return this}retry(closure,duration=400,counter=0){try{closure()}catch(error){if(counter>10){console.error(`the ${closure} could not be loaded after 10 retries.`);return}setTimeout(()=>{retry(closure,duration,counter+1)},duration)}}};
